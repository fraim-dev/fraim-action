# Example GitHub Actions workflow for Fraim Security Scan
# Copy this file to .github/workflows/security.yml in your repository

name: Security Scan with Fraim

on:
  pull_request:
    branches: [main, master]
  push:
    branches: [main, master]
  schedule:
    # Run weekly full scan on Sundays at 2 AM UTC
    - cron: '0 2 * * 0'

jobs:
  security-scan:
    name: Fraim Security Analysis
    runs-on: ubuntu-latest
    
    permissions:
      contents: read
      actions: read
      security-events: write
      pull-requests: write
    
    steps:
      - name: Run Fraim Security Scan
        id: fraim-scan
        uses: fraim-dev/fraim-action@v0  # Use v0 for latest v0.x.x releases
        with:
          # Required: Set up your API key in repository secrets (choose one)
          gemini-api-key: ${{ secrets.GEMINI_API_KEY }}
          # openai-api-key: ${{ secrets.OPENAI_API_KEY }}
          
          # AI model to use (default: gemini/gemini-2.5-flash)
          model: 'gemini/gemini-2.5-flash'
          # Alternative OpenAI models:
          # model: 'openai/gpt-4o-mini'

          # Optional: Customize the scan
          workflows: 'code,iac'
          confidence: '8'